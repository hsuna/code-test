!function(){var requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(c){window.setTimeout(c,1e3/60)},mainfest={dialog:8,formal:5,home:9,prehot:26,winners:7},performance=window.performance||window.msPerformance||window.webkitPerformance||{timing:{navigationStart:(new Date).getTime()}},step=window.loadingStep=0,loading=document.getElementById("loading"),loadingBar=document.getElementById("loadingBar"),loadingMsg=document.getElementById("loadingMsg"),emptymask=document.getElementById("emptymask"),total=getTotal();function run(){if(loading)if(window.isStopLoading)requestAnimationFrame(run);else{if(emptymask&&(document.body.removeChild(emptymask),emptymask=null),window.scrollTo(0,0),step===total)return loading.className+=" loading_willLeave",void console.log("time:",(new Date).getTime()-performance.timing.navigationStart);var rate=Math.max((window.loadingStep-step)/10,0);if(step<.66*total)step+=Math.max(.2,rate);else if(step<.92*total)step+=Math.max(.02,rate);else{if(0==rate)return void requestAnimationFrame(run);step+=rate}(step>total||step>.95*total&&window.loadingStep>=total)&&(window.loadingStep=step=total);var n=step/total;1==n&&document.querySelector(".loading-bar").classList.remove("addBefore");var startPosition=-100;loadingBar.style.left=100*n-100+"%",loadingMsg.innerText=(100*n).toFixed(0)+"%",loadingMsg.style.transform="translate3d("+3.89*n+"rem,0,0)",loadingMsg.style.webkitTransform="translate3d("+3.89*n+"rem,0,0)",requestAnimationFrame(run)}}function getTotal(){for(var assetsMap,len=1,list={index:["dialog","formal","home"],prehot:["prehot"],winners:["winners"]}[loading.getAttribute("data-mainfest")]||[],i=0;i<list.length;i++)len+=mainfest[list[i]];return len}function hideLoading(){window.loadingStep=void 0,loading.parentNode.removeChild(loading),loading=null,loadingBar=null,loadingMsg=null;var loadingHide=new CustomEvent("loadinghide");window.dispatchEvent(loadingHide)}function loadingOnload(){var img=new Image;img.onload=function(){document.querySelector(".loading-bar").classList.add("addBefore")},img.src="./static/img/loading-progress.png"}loading.addEventListener("touchstart",function(e){e.preventDefault()}),window.loadingStep=1,run(),loadingOnload(),loading.addEventListener("transitionend",function(e){/opacity/.test(e.propertyName)&&hideLoading()})}();